/*! motion v0.0.0 | (c) 2014, 2015/01/05 | action | motion Foundation, Inc. */
!function(){var a=function(){var a,b=/\W/g,c=document,d=document.getElementsByTagName("head")[0]||document.documentElement;return function(e,f){if(!f||(f=f.replace(b,"-"),!c.getElementById(f))){var g;!a||f?(g=c.createElement("style"),f&&(g.id=f),d.appendChild(g)):g=a,g.appendChild(c.createTextNode(e)),f||(a=g)}}}();a('.mo-pop-action{padding: 20px;background-color: rgba(255,255,255,0.9);}[class*="mo-btn-"]{margin: 15px 0;padding: 8px 15px;font-weight: bold;border-radius: 5px; }.mo-pop-action .mo-pop-foot > div:last-child{margin-bottom: 0;} .mo-btn-strong{background: #d00;color: #fff;}.mo-btn-normal{background: #ddd;color: #333;}.mo-btn-weak{background: #888;color: #fff;}.mo-pop-action{border-radius: 0;}'),function(){!function(){if(!window.Motion){var a={version:"1.1",add:function(a,b){for(var c=window,d=arguments.callee,e=null,f=(/^([\w\.]+)(?:\:([\w\.]+))?\s*$/.test(a),RegExp.$1.split(".")),g=RegExp.$2.split("."),a=f.pop(),h=/[A-Z]/.test(a.substr(0,1)),i=function(){var a=arguments.callee.prototype.init;"function"==typeof a&&arguments.callee.caller!=d&&a&&a.apply(this,arguments)},j=0;j<f.length;j++){var k=f[j];c=c[k]||(c[k]={})}if(""!=g[0]){e=window;for(var j=0;j<g.length;j++)if(e=e[g[j]],!e){e=null;break}}h&&"function"==typeof b?(e&&(i.prototype=new e,i.prototype.superClass=e),c[a]=i,i.prototype.constructor=i,b.call(c[a].prototype)):c[a]=b}};window.Motion=window.mo=a}}()}(),function(){Motion.add("mo.Base",function(){{var a=this;this.constructor}a.constructor=function(){},a.on=function(){return box=Zepto(this),box.on.apply(box,arguments)},a.off=function(){return box=Zepto(this),box.off.apply(box,arguments)},a.trigger=function(){var a=Zepto(this);return a.triggerHandler.apply(a,arguments)}})}(),a(".mo-pop-wrap{z-index: 1000;}.mo-pop{border-radius: 3px; -webkit-box-sizing: border-box;box-sizing: border-box;padding:10px; background-color: #fff;text-align: center;font-size: 14px;}"),function(){Motion.add("mo.Overlay:mo.Base",function(){var a=this,b={},c=this.constructor,d=window.top,e=Zepto(d.document);d=Zepto(d),b.CLOSE="mo-pop-close",b.BODY="mo-pop-body",b.FOOT="mo-pop-foot",b.tpl='			<div class="mo-pop">				<button class="mo-pop-close" type="button" title="关闭弹出层">关闭</button>				<div class="mo-pop-body"></div>				<div class="mo-pop-foot"></div>			</div>',c.config={mask:!0,autoOpen:!0,hasClose:!1,hasFoot:!0,effect:!0,offset:[0,0],valign:"middle",className:"pop"+parseInt(1e3*Math.random()),start:{opacity:0,"-webkit-transform":"rotateX(-90deg)","-webkit-transform-origin":"50% 0"},end:{opacity:1,"-webkit-transform":"rotateX(0)","-webkit-transform-origin":"50% 0"},duration:800,easing:"cubic-bezier(0.77, 0, 0.175, 1)",content:"",width:300,height:"auto",tpl:b.tpl},a.init=function(a){"string"==typeof a&&(a={content:a}),this.config=Zepto.extend({},c.config,a);var d=this,a=d.config;d.event&&d.on(d.event),a.event&&d.on(a.event),b.create.call(d),b.fill.call(d),b.attach.call(d),b.render.call(d),d.trigger("init"),d.config.autoOpen&&window.setTimeout(function(){d.open()},0)},b.create=function(){{var a=e.find("body"),c=this,f=c.config;"string"!==Zepto.type(c.config.tpl)}c.dom={},c.dom.wrap=Zepto('<div class="mo-pop-wrap"></div>').prependTo(a),c.dom.wrap.css({display:"block",position:"fixed",top:0,left:0,"pointer-events":"none",width:d.width()+"px",height:d.height()+"px",overflow:"hidden",perspective:"1000px","-webkit-perspective":"1000px","-webkit-backface-visibility":"hidden;"}),c.dom.mask=Zepto('<div class="mo-pop-mask"></div>').prependTo(c.dom.wrap),c.dom.mask.css({display:"none",position:"absolute",top:0,left:0,width:"100%",height:"9999px",background:"#000",opacity:.5,"pointer-events":"auto",zIndex:999}),c.dom.box=Zepto(c.config.tpl).clone().prependTo(c.dom.wrap),c.dom.box.addClass(f.className),c.dom.box.attr("role","dialog"),c.dom.box.attr("aria-label",f.title),c.dom.head=c.dom.box.find("."+b.HEAD),c.dom.close=c.dom.box.find("."+b.CLOSE),c.dom.body=c.dom.box.find("."+b.BODY),c.dom.foot=c.dom.box.find("."+b.FOOT),c.cssPrefix="",c.propPrefix="";var g={webkit:"webkit",Moz:"moz",ms:"ms"},h=document.createElement("div");for(var i in g)if(void 0!==h.style[i+"Transform"]){c.cssPrefix="-"+g[i]+"-",c.propPrefix=i;break}},b.fill=function(){var a=this,c=a.config;b.fillHead.call(a,c.title),b.fillBody.call(a,c.content)},b.fillHead=function(a){var b=(this.config,this.dom.head.html()),d="";b&&(d=c.parseTPL({title:a},b)),this.dom.head.html(d)},b.fillBody=function(a){var b=this,c=b.config,d=/^http:\/\/[\w-./?%&=\u4e00-\u9fa5]+$/i,e=c.contentType;return void 0===e&&""!==a&&("object"==typeof a&&Zepto(a).length>0?e="element":"string"==typeof a&&(e=d.test(a)?"url":"string")),"element"===e?void Zepto(a).clone().appendTo(b.dom.body).show():("url"===e?(a='<iframe src="'+a+'" frameborder="0" style="width:100%;height:100%;overflow:hidden;"></iframe>',b.dom.body.html(a)):b.dom.body.html(a),void(b.contentType=e))},b.attach=function(){{var c=this;c.config}d.on("resize",function(){window.clearTimeout(c.resizeTimer),c.resizeTimer=window.setTimeout(function(){b.updatePos.call(c),c.dom.box.css(c._startProp),c.opened&&c.dom.box.css(c._endProp),c.dom.wrap.css({width:d.width(),height:d.height()})},50)}),c.dom.close.on("touchend",function(b){a.close.call(c),b.stopPropagation()}),c.dom.mask.on("touchmove",function(a){a.stopPropagation(),a.preventDefault()}),c.dom.box.on("touchmove",function(a){a.stopPropagation(),a.preventDefault()}),c.dom.mask.on("touchstart",function(){c.dom.box.css("opacity",.8)}),c.dom.mask.on("touchend",function(){c.dom.box.css("opacity",1)})},b.updatePos=function(){var a=this,b=a.config,c={},e={},f=0,g=0;if(b.follow===!0){var h=b.pos.offset(),i=0,j=0;if(window.frameElement){var k=Zepto(window.frameElement).offset();i=k.left,j=k.top}e.left=h.left+i,e.top=h.top+j+b.pos.outerHeight()}else{c.left=e.left=(d.width()-a.dom.box[0].offsetWidth)/2;var l=a.dom.box[0].offsetHeight;switch(b.valign){case"top":c.top=0,e.top=0;break;case"bottom":c.top=d.height(),e.top=d.height()-l;break;case"middle":c.top=-l,e.top=(d.height()-l)/2}c.left+=f,c.top+=g,e.left+=f,e.top+=g}c.left+=b.offset[0],c.top+=b.offset[1],e.left+=b.offset[0],e.top+=b.offset[1],b.effect&&(a._startProp=Zepto.extend({},c,b.start),a._endProp=Zepto.extend({},e,b.end))},a.open=function(){var a=this,c=a.config;a.dom.box.css("display","block"),b.updatePos.call(a),a.trigger("beforeopen")!==!1&&(window.setTimeout(function(){a.dom.box.animate(a._endProp,c.duration,c.easing,function(){a.trigger("open")})},0),a.opened=!0,a.opened&&c.mask&&a.dom.mask.fadeIn(0))},a.close=function(){var a=this,b=a.config;a.trigger("beforeclose")!==!1&&a.dom.box.animate(a._startProp,b.duration,b.easing,function(){a.opened=!1,a.dom.wrap.remove(),a.trigger("close")})},b.render=function(){var a=this,c=a.config;c.hasHead||a.dom.head.remove(),c.hasClose||a.dom.close.remove(),c.hasFoot||a.dom.foot.remove(),a.dom.box.css({position:"fixed",top:-1e3,left:0,width:c.width,height:c.height,"pointer-events":"auto",overflow:"visible",zIndex:1e3}),b.updatePos.call(a),a.dom.box.css(a._startProp),a.dom.box.hide()},c.parseTPL=function(a,b){for(var c in a)b=b.replace("{"+c+"}",a[c]);return b}})}(),function(){Motion.add("mo.Action:mo.Overlay",function(){var a=this,b={},c=this.constructor;c.config={tpl:'			<div class="mo-pop mo-pop-action">				<button class="mo-pop-close" type="button" title="关闭弹出层">关闭</button>				<div class="mo-pop-body"></div>				<div class="mo-pop-foot"></div>			</div>',type:"alert",buttons:["确定","取消"],valign:"bottom",start:{},end:{},width:"100%"},b.tpl={button:'<div class="{class}"><span>{text}</span></div>'},b.buttonType={normal:{text:"确定",className:"mo-btn-normal",callback:function(){a.close.call(this)}},strong:{text:"确定",className:"mo-btn-strong",callback:function(){a.close.call(this)}},weak:{text:"取消",className:"mo-btn-weak",callback:function(){a.close.call(this)}}},a.init=function(a){"string"==typeof a&&(a={content:a}),this.config=Zepto.extend(!0,{},c.config,a);var d=this,a=d.config;b.handleConfig.call(d),d.superClass.call(d,a),b.fillFoot.call(d)},b.handleConfig=function(){},b.fillFoot=function(){var a=this,c=a.config,d=c.buttons;if(a.buttons=[],a.dom.foot.empty(),a.dom.foot.length>0)for(var e=0;e<d.length;e++){var f,g=d[e];if("string"==typeof g){var h="normal";e==d.length-1&&(h="weak"),0==e&&(h="strong"),g=Zepto.extend({},b.buttonType[h],{text:g})}g&&(g=Zepto.extend({},b.buttonType.normal,g),f=Zepto(b.tpl.button.replace("{class}",g.className).replace("{text}",g.text)),f[0].moInfo=g,f.on("touchend",function(b){this.moInfo.callback.call(a),b.preventDefault()}),a.buttons.push(f.appendTo(a.dom.foot)))}}})}()}();