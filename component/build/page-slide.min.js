/*! motion v0.0.0 | (c) 2014, 2014/12/25 | page-slide | motion Foundation, Inc. */
!function(){!function(){!function(){if(!window.Motion){var a={version:"1.1",add:function(a,b){for(var c=window,d=arguments.callee,e=null,f=(/^([\w\.]+)(?:\:([\w\.]+))?\s*$/.test(a),RegExp.$1.split(".")),g=RegExp.$2.split("."),a=f.pop(),h=/[A-Z]/.test(a.substr(0,1)),i=function(){var a=arguments.callee.prototype.init;"function"==typeof a&&arguments.callee.caller!=d&&a&&a.apply(this,arguments)},j=0;j<f.length;j++){var k=f[j];c=c[k]||(c[k]={})}if(""!=g[0]){e=window;for(var j=0;j<g.length;j++)if(e=e[g[j]],!e){e=null;break}}h&&"function"==typeof b?(e&&(i.prototype=new e,i.prototype.superClass=e),c[a]=i,i.prototype.constructor=i,b.call(c[a].prototype)):c[a]=b}};window.Motion=window.mo=a}}()}(),function(){Motion.add("mo.Base",function(){{var a=this;this.constructor}a.constructor=function(){},a.on=function(){return box=Zepto(this),box.on.apply(box,arguments)},a.off=function(){return box=Zepto(this),box.off.apply(box,arguments)},a.trigger=function(){var a=Zepto(this);return a.triggerHandler.apply(a,arguments)}})}(),function(){Motion.add("mo.Tab:mo.Base",function(){var a=this,b={},c=this.constructor;c.config={effect:"base",direction:"x",autoPlay:!1,playTo:0,type:"touchend",currentClass:"current",link:!1,stay:2e3,delay:200,touchDis:20,lazy:window.undefined,merge:!1,degradation:"base",animateTime:300,easing:"swing",title:{delay:0},controlDisabed:!1},c.effect={},a.init=function(a){this.config=Zepto.extend(!0,{},c.config,a);var d=this,a=d.config,e=Zepto(a.target);e.length<=1||(Zepto.extend(d,{target:e,controller:null,prevPage:window.undefined,curPage:window.undefined,container:e.parent(),prevBtn:Zepto(a.prevBtn),nextBtn:Zepto(a.nextBtn),isPlaying:a.autoPlay}),c.effect[a.effect]&&d.on(c.effect[a.effect]),a.event&&d.on(a.event),d.trigger("beforeinit")!==!1&&(b.initDOM.call(d),b.attach.call(d),d.trigger("init")!==!1&&(d.playTo(a.playTo),a.autoPlay&&d.play())))},b.initDOM=function(){var a=this,b=a.config;if(a.wrap=a.container,a.container=a.wrap.parent(),b.controller!==!1){if(b.controller=Zepto(b.controller),b.controller.length<1){for(var c=Zepto('<ul class="controller">'),d="",e=0;e<a.target.length;e++)d+='<li><a href="#">'+(e+1)+"</a></li>";c.html(d),a.container.append(c),b.controller=c.children()}a.controller=b.controller}var f=a.target.find("script");f.each(function(a,b){b=Zepto(b),/^\s*document\.write\([^\)]+\)[\s;]*$/.test(b.html())&&b.remove()});var g=b.title.dataSrc||a.target,h=b.title.dataProp||"title",i=Zepto(b.title.dataWrap);g=Zepto(g),i.length>0&&g.attr(h)&&(a.titleWrap=i,a.titleData=[],g.each(function(b,c){a.titleData.push(Zepto(c).attr(h))})),a.cssPrefix="",a.propPrefix="";var j={webkit:"webkit",Moz:"moz",ms:"ms"},k=document.createElement("div");for(var l in j)if(void 0!==k.style[l+"Transform"]){a.cssPrefix="-"+j[l]+"-",a.propPrefix=l;break}},b.attach=function(){var a=this,c=a.config;a.controller&&Zepto.each(a.controller,function(b,d){var d=Zepto(d);d.on(c.type,function(){a.playTo(b)}),c.link||Zepto(d).on("touchend",function(a){a.preventDefault()})}),a.nextBtn&&Zepto(a.nextBtn).on("touchend",function(b){a.next(),b.preventDefault()}),a.prevBtn&&Zepto(a.prevBtn).on("touchend",function(b){a.prev(),b.preventDefault()}),a.wrap.on("touchstart",function(){a.isPlaying&&b.clearTimer.call(a)}),Zepto("body").on("touchend",function(){a.isPlaying&&b.setTimer.call(a)}),c.touchMove&&b.touchMove.call(a)},a.playTo=function(a){function c(a){if(a>=e.target.length&&(a%=e.target.length),0>a){var b=a%e.target.length;a=0===b?0:b+e.target.length}return a}{var d,e=this,f=e.config;e.curPage!==window.undefined}if(e.prevPage=e.curPage,d=e.curPage,a=e.curPage=c(a),e.controller&&a!==d){var g=e.controller[a],h=e.controller[d];g&&Zepto(g).addClass(e.config.currentClass),h&&Zepto(h).removeClass(e.config.currentClass)}e.titleWrap&&window.setTimeout(function(){e.titleWrap.html(e.titleData[e.curPage]||"")},f.title.delay);var i=Zepto(e.target[e.curPage]);if(f.lazy===window.undefined){var j=i.children();1===j.length&&"textarea"==j[0].tagName.toLowerCase()&&(f.lazy=!0)}f.lazy===!0&&i.length>0&&!i.data("parsed")&&b.lazyload(i),e.trigger("beforechange")},a.next=function(){this.playTo(this.curPage+1)},a.prev=function(){this.playTo(this.curPage-1)},b.setTimer=function(){var a=this,c=a.config;a.timer&&b.clearTimer.call(a),a.timer=window.setInterval(function(){var b=a.curPage+1;a.playTo(b)},c.stay)},b.clearTimer=function(){window.clearInterval(this.timer)},a.play=function(){var a=this;b.setTimer.call(a),a.isPlaying=!0,a.trigger("play")},a.stop=function(){var a=this;b.clearTimer.call(a),a.isPlaying=!1,a.trigger("stop")},c.extend=function(a,b){var d={};Zepto.isPlainObject(a)?d=a:d[a]=b,Zepto.extend(c.effect,d)},b.lazyload=function(a){var b=a.children("textarea");1===b.length&&(a.html(b.eq(0).val()),a.data("parsed",!0))},b.touchMove=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n=this,o=n.config;o.touchMove&&n.wrap.on("touchstart",function(f){d=i=f.touches[0].pageX,e=j=f.touches[0].pageY,n.trigger("touchstart",[d,e])!==!1&&(n.wrap.on("touchmove",a),n.wrap.on("touchend",b),c="")}),a=function(a){var b=a.touches[0].pageX,p=a.touches[0].pageY;f=b-d,g=p-e,k=b-i,l=p-j,i=b,j=p,"x"==o.direction?(h=f,m=k):(h=g,m=l),c||(c=Math.abs(f/g)>1?"x":"y"),o.direction==c&&(a.preventDefault(),a.stopPropagation(),n.trigger("touchmove",[h,m,a]))},b=function(){if(!c||o.direction==c){(void 0===h||isNaN(h))&&(h=0),n.wrap.off("touchmove",a),n.wrap.off("touchend",b);var d=!0;if(n.trigger("touchend",[h])!==!1){if(!h||Math.abs(h)<o.touchDis||!d)return void n.playTo(n.curPage);if(h>0)var e=n.curPage-1<0?0:n.curPage-1;else var e=n.curPage+1>=n.target.length?n.target.length-1:n.curPage+1;n.playTo(e),h=0}}}},c.extend("base",{init:function(){var a=this;config=a.config,Zepto.each(a.target,function(b,c){a.target[config.playTo][0]!=c&&Zepto(c).hide()})},beforechange:function(){var a=this,b=a.prevPage===window.undefined?null:a.target[a.prevPage],c=a.target[a.curPage];b&&Zepto(b).hide(),Zepto(c).show(),a.trigger("change")}})})}(),function(){Motion.add("mo.PageSlide:mo.Tab",function(){var a=this,b=this.constructor;a.init=function(a){this.config=Zepto.extend(!0,{},b.config,a),this.superClass.call(this,this.config)},b.config={touchMove:!0,direction:"y",effect:"slide",controller:!1},mo.Tab.extend("slide",{init:function(){var a=this,b=a.config;if(a.container.css({position:"relative",overflow:"hidden"}),a.container.css("-webkit-backface-visibility","hidden"),"x"==b.direction){a.target.css("float","left");var c=0;a.target.each(function(a,b){c+=Zepto(b)[0].offsetWidth}),0>=c&&(c=document.documentElement.offsetWidth*a.target.length),a.wrap.css("width",b.wrapWidth||c+"px"),a.animProp="translateX",a.offsetProp="offsetLeft"}else a.animProp="translateY",a.offsetProp="offsetTop"},touchstart:function(){return 1==this.moving?!1:void 0},touchmove:function(a,b,c){a.preventDefault();var d=this,e={},f=/\(([\d-]*).*\)/.exec(d.wrap.css(d.propPrefix+"Transform")),g=f?1*f[1]:0;e[d.cssPrefix+"transform"]=d.animProp+"("+(g+c)+"px)",d.wrap.css(e,0)},touchend:function(a,b){var c=this,d=c.target[c.curPage].getBoundingClientRect(),e=window.innerHeight;return 0>b&&d.bottom>e||b>0&&d.top<0?!1:void 0},beforechange:function(){var a=this,b=a.config,c=(a.prevPage===window.undefined?0:a.prevPage,a.curPage),d={};d[a.animProp]=-a.target[c][a.offsetProp]+"px",a.moving=!0,a.wrap.animate(d,b.animateTime,b.easing,function(){a.moving=!1,a.trigger("change")})}}),mo.Tab.extend("roll",{init:function(){var a=this,b=a.config,c=a.cssPrefix,d=a.wrap.offset(),e="x"==b.direction?d.width:d.height,f="x"==b.direction?"rotateY":"rotateX",g=360/a.target.length,h=Math.round(e/2/Math.tan(Math.PI/a.target.length));a.theta=g,a.radius=h,a.rotateFn=f,a.container.css(c+"perspective","200px"),a.container.css(c+"backface-visibility","hidden");var i={position:"relative"};i[c+"transform-style"]="preserve-3d",i[c+"transform"]="translateZ(-"+h+"px)",i[c+"transform-origin"]="50% 50% -"+h+"px",a.wrap.css(i);for(var j=0;j<a.target.length;j++){var k={position:"absolute",left:0,top:0};k[c+"transform"]=f+"(-"+360*j/a.target.length+"deg) translateZ("+h+"px)",a.target.eq(j).css(k)}},touchstart:function(){return 1==this.moving?!1:void 0},touchmove:function(a,b){var c=this,d=c.curPage*c.theta-b/5;c.wrap.css(c.cssPrefix+"transform",c.rotateFn+"("+d+"deg) translateZ(-"+c.radius+"px)"),a.preventDefault()},touchend:function(){},beforechange:function(){var a=this,b=a.config,c=a.curPage*a.theta,d={};d[a.cssPrefix+"transform"]=a.rotateFn+"("+c+"deg) translateZ(-"+a.radius+"px)",a.moving=!0,a.wrap.animate(d,b.animateTime,b.easing,function(){a.moving=!1,a.trigger("change")})},change:function(){}}),mo.Tab.extend("scale",{init:function(){{var a=this,b=a.config,c=(a.cssPrefix,a.wrap.offset()),d="x"==b.direction?c.width:c.height;"x"==b.direction?"rotateY":"rotateX",360/a.target.length,Math.round(d/2/Math.tan(Math.PI/a.target.length))}a.wrap.css({position:"relative",overflow:"hidden"}),a.target.each(function(a,b){b=Zepto(b)}),"x"==b.direction?(a.animProp="translateX",a.offsetProp="offsetLeft"):(a.animProp="translateY",a.offsetProp="offsetTop")},touchstart:function(){return 1==this.moving?!1:void 0},touchmove:function(a,b,c){var d=this,e={},f=d.target.eq(d.curPage),g=/\(([\d-]*).*\)/.exec(d.wrap.css(d.propPrefix+"Transform")),h=g?1*g[1]:0;e[d.cssPrefix+"transform"]=d.animProp+"("+(h+c)+"px)",b>0?f.css(d.cssPrefix+"transform-origin","50% 0%"):f.css(d.cssPrefix+"transform-origin","50% 100%"),d.wrap.css(e,0);var i=1-Math.abs(b/Zepto(window).height());a.preventDefault();var j={};j[d.cssPrefix+"transform"]="scaleX("+i+") scaleY("+i+")",f.css(j)},touchend:function(){},beforechange:function(){var a=this,b=a.config,c=a.target.eq(a.curPage),d=a.prevPage===window.undefined?null:a.target.eq(a.prevPage),e={};if(e[a.cssPrefix+"transform"]="translateY(-"+c[0].offsetTop+"px)",d){var f={};f[a.cssPrefix+"transform"]="scaleX(0.2) scaleY(0.2)",f[a.cssPrefix+"backface-visibility"]="hidden",d.animate(f,b.animateTime,b.easing,function(){d.css(a.cssPrefix+"transform","scaleX(1) scaleY(1)")})}var g={};g[a.cssPrefix+"transform"]="scaleX(1) scaleY(1)",g[a.cssPrefix+"backface-visibility"]="hidden",c.animate(g,b.animateTime,b.easing,function(){}),a.moving=!0,a.wrap.animate(e,b.animateTime,b.easing,function(){a.moving=!1,a.trigger("change")})},change:function(){}})})}()}();